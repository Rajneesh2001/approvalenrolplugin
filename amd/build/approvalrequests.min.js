define("enrol_approvalenrol/approvalrequests",["jquery","core/ajax","core/notification"],(function($,Ajax,notification){return{init:function(){$(document).on("click",".approve, .reject",(function(){let userid=$(this).attr("id").split(":")[1],courseid=$(this).data("courseid"),requestStatus=$(this).hasClass("approve")?"approve":"reject",userdisplayname=$(this).data("username"),notificationObject={message:"User ".concat(userdisplayname," request has been ").concat("approve"==requestStatus?"approved":"rejected","."),type:"info"};Ajax.call([{methodname:"enrol_approvalenrol_updaterequests",args:{userid:userid,courseid:courseid,requeststatus:"approve"==requestStatus?1:3},done:function(response){if(200==response.statuscode){notification.addNotification(notificationObject);let tableBody="",i=1;$.each(response.data,(function(index,value){let lastrow=index==response.data.length-1;const commonattr={"data-courseid":value.courseid,"data-username":value.firstname+" "+value.lastname};let approveicon=$("<img>",{src:M.cfg.wwwroot+"/enrol/approvalenrol/pix/check-solid.svg",class:"icon approve",id:"approve-id:"+value.id}).attr(commonattr),rejecticon=$("<img>",{src:M.cfg.wwwroot+"/enrol/approvalenrol/pix/xmark-solid.svg",class:"icon reject",id:"reject-id:"+value.id}).attr(commonattr);tableBody+='\n                                        <tr class="'.concat(lastrow?"lastrow":"",'">\n                                            <td class="cell c0">').concat(i,'</td>\n                                            <td class="cell c1">').concat(value.firstname+value.lastname,'</td>\n                                            <td class="cell c2 ">').concat(value.email,'</td>\n                                            <td class="cell c3 lastcol">\n                                            ').concat(approveicon.prop("outerHTML")," \n                                            ").concat(rejecticon.prop("outerHTML"),"</td>\n                                        </tr>\n                                    "),i++})),$(".generaltable tbody").empty(),$(".generaltable tbody").append(tableBody)}},fail:function(){}}])}))}}}));

//# sourceMappingURL=approvalrequests.min.js.map