define("enrol_approvalenrol/approvalrequests",["jquery","core/ajax","core/notification"],(function($,Ajax,notification){return{init:function(){$(document).on("click",".approve, .reject",(function(e){e.preventDefault();let userid=$(this).attr("id").split(":")[1],courseid=$(this).data("courseid"),requestStatus=$(this).hasClass("approve"),userdisplayname=$(this).data("username"),notificationObject={message:"User ".concat(userdisplayname," request has been ").concat(requestStatus?"approved":"rejected","."),type:"info"};$(".table-responsive").addClass("process"),$(".loader_container").css("display","block"),Ajax.call([{methodname:"enrol_approvalenrol_updaterequests",args:{userid:userid,courseid:courseid,requeststatus:requestStatus?1:3},done:function(response){if(200==response.statuscode){$(".table-responsive").removeClass("process"),$(".loader_container").css("display","none"),notification.addNotification(notificationObject);let tableBody="";if(0==response.data.length)tableBody=$("<div>").append("No requests found").addClass("alert alert-info"),$(".generaltable").empty(),$(".generaltable").append(tableBody);else{let i=1;$.each(response.data,(function(index,value){let lastrow=index==response.data.length-1;const commonattr={"data-courseid":value.courseid,"data-username":value.firstname+" "+value.lastname};let approveIcon=$("<a>",{href:"".concat(M.cfg.wwwroot,"/enrol/approvalenrol/approve.php?id=").concat(value.id,"&userid=").concat(userid,"\n                                            courseid=").concat(courseid,"&requeststatus=").concat(1)}).append($("<img>",{src:M.cfg.wwwroot+"/enrol/approvalenrol/pix/check-solid.svg",class:"icon approve",id:"approve-id:"+value.userid}).attr(commonattr)),rejectIcon=$("<a>",{href:"".concat(M.cfg.wwwroot,"/enrol/approvalenrol/approve.php?id=").concat(value.id,"\n                                            &userid=").concat(userid,"&courseid=").concat(courseid,"&requeststatus=").concat(3)}).append($("<img>",{src:M.cfg.wwwroot+"/enrol/approvalenrol/pix/xmark-solid.svg",class:"icon reject",id:"reject-id:"+value.userid}).attr(commonattr));tableBody+='\n                                        <tr class="'.concat(lastrow?"lastrow":"",'">\n                                            <td class="cell c0">').concat(i,'</td>\n                                            <td class="cell c1">').concat(value.firstname+value.lastname,'</td>\n                                            <td class="cell c2 ">').concat(value.email,'</td>\n                                            <td class="cell c3 lastcol">\n                                            ').concat(approveIcon.prop("outerHTML")," \n                                            ").concat(rejectIcon.prop("outerHTML"),"</td>\n                                        </tr>\n                                    "),i++}))}$(".generaltable tbody").empty(),$(".generaltable tbody").append(tableBody)}},fail:function(){}}])}))}}}));

//# sourceMappingURL=approvalrequests.min.js.map